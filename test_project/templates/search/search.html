{% extends "project/base.html" %}
{% load staticfiles %}

{% block content %}
	<h2>Search</h2>

	<form method="get" action=".">
		<table>
			{{ form.as_table }}
			<tr>
				<td>&nbsp;</td>
				<td>
					<input type="submit" value="Search">
				</td>
			</tr>
		</table>

		{% if query %}

			{% for result in page.object_list %}
				<p>
					<h3>
						<a href="{% url 'project:detail' result.object.pk result.object.slug %}">{{ result.object.title }}</a>
					</h3>
					<h5>
						Author: {{ result.object.author }}</a> | Added: {{ result.object.added }}
					</h5>
					<p>
						{{ result.object.content|safe|truncatechars:100 }}
						<a href="{% url 'project:detail' result.object.pk result.object.slug %}">Read More</a>
					</p>
				</p>
			{% empty %}
				<p>No results found.</p>
			{% endfor %}

			{% if page.has_previous or page.has_next %}
				<div>
					{% if page.has_previous %}<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>{% endif %}
					|
					{% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>{% endif %}
				</div>
			{% endif %}
		{% else %}
			<p>Try another search string</p>
		{% endif %}
	</form>
 
{% endblock %}